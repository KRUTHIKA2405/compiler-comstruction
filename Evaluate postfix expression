%{
#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>

#define MAX 100
int stack[MAX];
int top = -1;

void push(int n) {
    if (top == MAX - 1) {
        printf("Stack Overflow\n");
        exit(1);
    }
    stack[++top] = n;
}

int pop() {
    if (top == -1) {
        printf("Stack Underflow\n");
        exit(1);
    }
    return stack[top--];
}
%}

%%

[0-9]+    { 
              // convert number and push to stack
              push(atoi(yytext));  
          }

[+\-*/]   { 
              int b = pop();
              int a = pop();
              int res;
              switch (yytext[0]) {
                  case '+': res = a + b; break;
                  case '-': res = a - b; break;
                  case '*': res = a * b; break;
                  case '/': res = a / b; break;
              }
              push(res);
          }

[\n]      { 
              printf("Result = %d\n", pop()); 
          }

[ \t]     { /* ignore spaces */ }

.         { printf("Invalid symbol: %s\n", yytext); }

%%

int main() {
    printf("Enter a postfix expression (operands and operators separated by space):\n");
    yylex();
    return 0;
}

int yywrap() {
    return 1;
}
